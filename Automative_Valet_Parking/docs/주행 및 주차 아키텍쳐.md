# ì£¼í–‰/ì£¼ì°¨ ì‹œìŠ¤í…œ ì•„í‚¤í…ì³ 
### (Driving/Parking System Architecture)

<br>

#### ëª©ì°¨

1. [RQT ë…¸ë“œ ê·¸ë˜í”„](#1-rqt-ë…¸ë“œ-ê·¸ë˜í”„)
2. [ì „ì²´ ì‹œìŠ¤í…œ ì•„í‚¤í…ì³](#2-ì „ì²´-ì•„í‚¤í…ì³)
3. [Simulator ë°ì´í„° ì—°ë™ (ì •ë°€ë„ë¡œì§€ë„ ë° ì„¼ì„œ ë°ì´í„°)](#3-simulator-ë°ì´í„°-ì—°ë™-ì•„í‚¤í…ì³-ì •ë°€ë„ë¡œ-ì§€ë„-ë°-ì„¼ì„œ-ë°ì´í„°)
4. [ì£¼í–‰ ì•„í‚¤í…ì³ (í•˜ì°¨ì§€ì  -> ì£¼ì°¨ì§€ì )](#4-ì£¼í–‰-ì•„í‚¤í…ì³)
    - [Dijkstra ê²½ë¡œ ìƒì„±](#4-1-dijkstra-ê²½ë¡œ-ìƒì„±-í˜„ì¬ìœ„ì¹˜-â†’-ì£¼ì°¨ì¥-ì…êµ¬)
    - [ì£¼ì°¨ì¥ ë‚´ë¶€ ê²½ë¡œ ìƒì„±](#4-2-ì£¼ì°¨ì¥-ë‚´ë¶€-ê²½ë¡œ-ìƒì„±-ì£¼ì°¨ì¥-ì…êµ¬-â†’-ì£¼ì°¨-ì§€ì )
    - [ì£¼í–‰ ì œì–´ê¸°](#4-3-ì£¼í–‰-ì œì–´ê¸°-ì œì–´-ë¡œì§)

5. [ì£¼ì°¨ ì•„í‚¤í…ì³](#5-ì£¼ì°¨-ì•„í‚¤í…ì³)
    - [RRT * ì•Œê³ ë¦¬ì¦˜ì„ í™œìš©í•œ ì£¼ì°¨ ê²½ë¡œ ìƒì„±](#5-1-rrt--ì•Œê³ ë¦¬ì¦˜ì„-í†µí•œ-ì£¼ì°¨-ê²½ë¡œ-ìƒì„±)
    - [RRT * ê²½ë¡œ ì „ì§„/í›„ì§„ ì£¼ì°¨ ì œì–´ ë¡œì§](#5-2-rrt--ê²½ë¡œ-ì „ì§„í›„ì§„-ì£¼ì°¨-ì œì–´-ë¡œì§)
    - [ê¶¤ë„ ìƒì„± ì•Œê³ ë¦¬ì¦˜ì„ í†µí•œ ì£¼ì°¨ ë¡œì§](#5-3-ê¶¤ë„-ìƒì„±-ì•Œê³ ë¦¬ì¦˜ì„-í†µí•œ-ì£¼ì°¨-ì œì–´-ë¡œì§)

---

<br>

## 1. RQT ë…¸ë“œ ê·¸ë˜í”„


```mermaid
graph TD;
    t___local_path((/local_path)) -->|publishes| n___lattice_planner
    t___local_path -->|publishes| n___advanced_purepursuit_forward
    t___local_path -->|publishes| n___ctrl_cmd
    t___lattice_path((/lattice_path)) -->|publishes| n___advanced_purepursuit_v_rrt_fw
    t___global_path((/global_path)) -->|publishes| n___assignment_star
    t___global_path -->|publishes| n___local_path_pub
    t___global_path -->|publishes| n___advanced_purepursuit_forward
    t___global_path -->|publishes| n___advanced_purepursuit_v_rrt_fw
    t___odom((/odom)) -->|broadcasts| n___tf
    t___odom -->|publishes| n___assignment_star
    t___odom -->|publishes| n___local_path_pub
    t___odom -->|publishes| n___map_change_controller
    t___odom -->|publishes| n___advanced_purepursuit_forward
    t___odom -->|publishes| n___advanced_purepursuit_v_rrt_fw
    t___global_change_cmd((/global_change_cmd)) -->|publishes| n___global_path_pub_v_rrt
    t___global_change_cmd -->|publishes| n___advanced_purepursuit_v_rrt_fw
    t___done((/done)) -->|publishes| n___global_path_pub_v_rrt
    t___Object_topic((/Object_topic)) -->|publishes| n___assignment_star
    t___Object_topic -->|publishes| n___lattice_planner
    t___imu((/imu)) -->|publishes| n___gpsimu_parser
    t___mode_cmd((/mode_cmd)) -->|publishes| n___srv_event_cmd
    t___start_rrt((/start_rrt)) -->|publishes| n___assignment_star
    t___start_rrt -->|publishes| n___global_path_pub_v_rrt
    t___ready_to_park((/ready_to_park)) -->|publishes| n___local_path_pub
    t___ready_to_park -->|publishes| n___srv_event_cmd
    t___ready_to_park -->|publishes| n___advanced_purepursuit_forward
    t___visualization_marker((/visualization_marker)) -->|publishes| n___assignment_star
    t___visualization_marker -->|publishes| n___global_path_pub_v_rrt
    t___Ego_topic((/Ego_topic)) -->|publishes| n___assignment_star
    t___Ego_topic -->|publishes| n___lattice_planner
    t___Ego_topic -->|publishes| n___advanced_purepursuit_forward
    t___Ego_topic -->|publishes| n___advanced_purepursuit_v_rrt_fw
    t___gps((/gps)) -->|publishes| n___gpsimu_parser
    t___rosbridge_websocket((/rosbridge_websocket)) -->|publishes| n___Object_topic
    t___rosbridge_websocket -->|publishes| n___imu
    t___rosbridge_websocket -->|publishes| n___Ego_topic
    t___rosbridge_websocket -->|publishes| n___gps
    t___gpsimu_parser -->|publishes| n___odom
    t___advanced_purepursuit_forward -->|publishes| n___ctrl_cmd
    t___advanced_purepursuit_forward -->|publishes| n___mode_cmd
    t___rosapi((/rosapi)) -->|publishes| n___assignment_star
    t___rosapi -->|publishes| n___lattice_planner
    t___mgeo_pub((/mgeo_pub)) -->|publishes| n___link
    t___mgeo_pub -->|publishes| n___node
    t___lattice_planner -->|subscribes| t___lattice_path
    t___advanced_purepursuit_v_rrt_fw -->|publishes| t___ctrl_cmd
    t___advanced_purepursuit_v_rrt_fw -->|publishes| t___start_rrt

```



---


<br>

## 2. ì „ì²´ ì•„í‚¤í…ì³




```mermaid
graph LR;

    n__global_path_pub_v_rrt((global_path_pub_v_rrt.py))
    
    t__global_change_cmd(/global_change_cmd)-->n__global_path_pub_v_rrt
    t__dijkstra_path(/dijkstra_path)-->n__global_path_pub_v_rrt
    t__start_rrt(/start_rrt)-->n__global_path_pub_v_rrt
    t__done(/done)-->n__global_path_pub_v_rrt
   
    n__global_path_pub_v_rrt-->t__global_path(/global_path)
    n__global_path_pub_v_rrt-->t__Dijkstra_Flag(/Dijkstra_Flag)
    n__global_path_pub_v_rrt-->t__ready_to_park(/ready_to_park)
    
    linkStyle 0,1,2,3 stroke:blue
    linkStyle 4,5,6 stroke:red
    style n__global_path_pub_v_rrt stroke:black ,color: black, fill: white, stroke-width : 5px
    
    
    
    
    n__gpsimu_parser((gpsimu_parser.py))
    
    t__gps((/gps)) --> n__gpsimu_parser((gpsimu_parser.py))
    t__imu((/imu)) --> n__gpsimu_parser((gpsimu_parser.py)) 
    n__gpsimu_parser((gpsimu_parser.py)) --> t__odom((/odom))
    
    linkStyle 7,8 stroke:blue
    linkStyle 9 stroke:red
    style n__gpsimu_parser stroke:black ,color: black, fill: white, stroke-width : 5px
    
    
    
    
    n__local_path_pub((local_path_pub.py))
    
    t__global_path(/global_path) --> n__local_path_pub
    t__odom(/odom) --> n__local_path_pub
    t__ready_to_park(/ready_to_park) --> n__local_path_pub
    n__local_path_pub --> t__local_path(/local_path)
    
    style n__local_path_pub stroke:black ,color: black, fill: white, stroke-width : 5px
    linkStyle 10,11,12 stroke:blue
    linkStyle 13 stroke:red
    
    
    
    n__mgeo_dijkstra_path_parking((mgeo_dijkstra_path_parking.py))
    
    t__odom(/odom)-->n__mgeo_dijkstra_path_parking
    n__mgeo_dijkstra_path_parking-->t__dijkstra_path(/dijkstra_path)
    t__Dijkstra_Flag(/Dijkstra_Flag)-->n__mgeo_dijkstra_path_parking
    
    style n__mgeo_dijkstra_path_parking stroke:black ,color: black, fill: white, stroke-width : 5px
    linkStyle 14,16 stroke:blue
    linkStyle 15 stroke:red
    
    
    
    
    n__lattice_planner((lattice_planner.py))
    
    t__Object_topic(/Object_topic)-->n__lattice_planner
    t__local_path(/local_path)-->n__lattice_planner
    t__Ego_topic(/Ego_topic)-->n__lattice_planner
    
    n__lattice_planner-->t_lattice_path(/lattice_path)
    
    style n__lattice_planner stroke:black ,color: black, fill: white, stroke-width : 5px
    linkStyle 17,18,19 stroke:blue
    linkStyle 20 stroke:red
    
    
    
    
    n__advanced_purepursuit_v_rrt_fw((advanced_purepersuit_v_rrt_fw.py))
    
    t__lattice_path(/lattice_path) --> n__advanced_purepursuit_v_rrt_fw
    t__global_path(/global_path) --> n__advanced_purepursuit_v_rrt_fw
    t__global_change_cmd(/global_change_cmd) --> n__advanced_purepursuit_v_rrt_fw
    t__odom(/odom) --> n__advanced_purepursuit_v_rrt_fw
    t__Ego_topic(/Ego_topic) --> n__advanced_purepursuit_v_rrt_fw
    
    n__advanced_purepursuit_v_rrt_fw --> t__ctrl_cmd(/ctrl_cmd)
	  n__advanced_purepursuit_v_rrt_fw --> t__start_rrt(/start_rrt)
    
    style n__advanced_purepursuit_v_rrt_fw stroke:black ,color: black, fill: white, stroke-width : 5px
    linkStyle 21,22,23,24,25 stroke:blue
    linkStyle 26,27 stroke:red
    
    
    
    n__mgeo_pub((mgeo_pub))
    
    n__mgeo_pub-->t__link(/link)
    n__mgeo_pub-->t__node(/node)
		
		style n__mgeo_pub stroke:black ,color: black, fill: white, stroke-width : 5px
    linkStyle 17,18 stroke:red
    
    
    
    n__tf_pub((tf_pub))
    
    t__odom(/odom)-->n__tf_pub
    
    style n__tf_pub stroke:black ,color: black, fill: white, stroke-width : 5px
		
		
		
		
		n__assignment_star((assignment_star.py))
		
		t__global_path(/global_path) --> n__assignment_star
		t__odom(/odom) --> n__assignment_star
		t__Ego_topic(Ego_topic) --> n__assignment_star
		t__Object_topic(/Object_topic) --> n__assignment_star
		t__start_rrt(/start_rrt) --> n__assignment_star
		
		n__assignment_star --> t__some_chatter(/some_chatter)
		n__assignment_star --> t__visualization_marker(/visualization_marker)
		n__assignment_star --> t__done(/done)
		
		style n__assignment_star stroke:black ,color: black, fill: white, stroke-width : 5px
		
		
		
		
		n__map_change_controller((map_change_controller.py))
		
		t__odom(/odom) --> n__map_change_controller
		
		n__map_change_controller --> t__global_change_cmd(/global_change_cmd)
		n__map_change_controller --> t__path_changed(/path_changed)
		
		style n__map_change_controller stroke:black ,color: black, fill: white, stroke-width : 5px
		
		
		
		n__advanced_purepursuit_forward((advanced_purepursuit_forward.py))
		
		t__global_path(/global_path) --> n__advanced_purepursuit_forward
		t__local_path(/local_path) --> n__advanced_purepursuit_forward
		t__odom(/odom) --> n__advanced_purepursuit_forward
		t__Ego_topic(/Ego_topic) --> n__advanced_purepursuit_forward
		t__ready_to_park(/ready_to_park) --> n__advanced_purepursuit_forward
		
		n__advanced_purepursuit_forward --> t__mode_cmd(/mode_cmd)
		n__advanced_purepursuit_forward --> t__ctrl_cmd(/ctrl_cmd)
		
		style n__advanced_purepursuit_forward stroke:black ,color: black, fill: white, stroke-width : 5px
		
		
		n__srv_event_cmd((srv_event_cmd.py))
		
		t__mode_cmd(/mode_cmd) --> n__srv_event_cmd
		t__ready_to_park(/ready_to_park)--> n__srv_event_cmd
		n__srv_event_cmd-->t__Service_MoraiEventCmd(/Service_MoraiEventCmd)
		
		style n__srv_event_cmd stroke:black ,color: black, fill: white, stroke-width : 5px
		
		
		
		n__tree_star((tree_star.py))
		
		n__assignment_star((assignment_star)) --> n__tree_star
		n__tree_star --> n__assignment_star
		
		style n__tree_star stroke:black ,color: black, fill: white, stroke-width : 5px
```

---

<br>

## 3. Simulator ë°ì´í„° ì—°ë™ ì•„í‚¤í…ì³ (ì •ë°€ë„ë¡œ ì§€ë„ ë° ì„¼ì„œ ë°ì´í„°)



```mermaid
graph LR;
		n__Morai_Simulator(MORAI ì‹œë®¬ë ˆì´í„° ì§€ë„)
		n__Morai_Simulator --> |node_set| n__Map  
		n__Morai_Simulator --> |link_set| n__Map
		
		style n__Morai_Simulator stroke:black ,color: black, fill: white, stroke-width : 5px
		
		n__mgeo_pub((mgeo_pub))  
		n__mgeo_pub-->|Link ë°ì´í„°|t__link(/link)
    n__mgeo_pub-->|Node ë°ì´í„°|t__node(/node)
		style n__mgeo_pub stroke:black ,color: black, fill: white, stroke-width : 5px
		
		n__MORAI_ì‹œë®¬ë ˆì´í„°(Simulation ì°¨ëŸ‰)
		n__MORAI_ì‹œë®¬ë ˆì´í„° --> |GPS ì„¼ì„œê°’| t__gps(/gps)
		n__MORAI_ì‹œë®¬ë ˆì´í„° --> |IMU ì„¼ì„œê°’|t__imu(/imu)
		style n__MORAI_ì‹œë®¬ë ˆì´í„° stroke:black ,color: black, fill: white, stroke-width : 5px
		
		
		n__gpsimu_parser(gpsimu_parser.py)
    
    t__gps((/gps)) --> n__gpsimu_parser(gpsimu_parser.py)
    t__imu((/imu)) --> n__gpsimu_parser(gpsimu_parser.py) 
    n__gpsimu_parser(gpsimu_parser.py) --> |ì„¼ì„œ ë°ì´í„° ì „ì²˜ë¦¬|t__odom((/odom))
    
    style n__gpsimu_parser stroke:black ,color: black, fill: white, stroke-width : 5px
    
    
    n__MORAI_ì‹œë®¬ë ˆì´í„° --> |LiDAR ì„¼ì„œê°’|t__lidar(/velodyne_points) --> n__lidar_velodyne_cluster(lidar_velodyne_cluster.py) --> |ì „ì²˜ë¦¬| t__cluster(/cluster) 
		n__MORAI_ì‹œë®¬ë ˆì´í„° --> |Camera ì˜ìƒ|t__camera(/image_jpeg/compressed)
		style n__MORAI_ì‹œë®¬ë ˆì´í„° stroke:black ,color: black, fill: white, stroke-width : 5px
		style n__lidar_velodyne_cluster stroke:black ,color: black, fill: white, stroke-width : 5px
		
		n__Map(ì •ë°€ë„ë¡œ ì§€ë„)
		n__Map --> |ì§€ë„ ì •ë³´ ì „ì²˜ë¦¬| n__mgeo_pub
		
		style n__Map stroke:black ,color: black, fill: white, stroke-width : 5px
		
		
		n__mgeo_pub(mgeo_pub)
		style n__mgeo_pub stroke:black ,color: black, fill: white, stroke-width : 5px
		
		linkStyle 0,1,4,5,9,12 stroke:blue
    linkStyle 2,3,8,11 stroke:red
```

---

<br>

## 4. ì£¼í–‰ ì•„í‚¤í…ì³

<br>

#### 4-1) Dijkstra ê²½ë¡œ ìƒì„± (í˜„ì¬ìœ„ì¹˜ â†’ ì£¼ì°¨ì¥ ì…êµ¬)

```mermaid
graph TB;
	
	n__map_change_controller(map_change_controller.py)
	
		
		n__map_change_controller --> |ê²½ë¡œ ëª¨ë“œ|t__global_change_cmd(/global_change_cmd)
		
		style n__map_change_controller stroke:red ,color: black, fill: white, stroke-width : 5px
	
	
	n__global_path_pub_v_rrt(global_path_pub.py)
    
    t__global_change_cmd(/global_change_cmd)-->|ëª¨ë“œ 1|t__cmd_1(ì£¼ì°¨ì¥ê¹Œì§€ Dijkstra ê²½ë¡œ)
    
    n__mgeo_dijkstra_path_parking(mgeo_dijkstra_path_parking.py) 
		t__odom(/odom) --> |í˜„ì¬ ìœ„ì¹˜ ë°ì´í„°| n__mgeo_dijkstra_path_parking
		t__cmd_1 --> n__mgeo_dijkstra_path_parking
		n__mgeo_dijkstra_path_parking-->|ì£¼ì°¨ì¥ê¹Œì§€ ìµœë‹¨ ê²½ë¡œ ìƒì„± í›„ Publish|t__dijkstra_path(/dijkstra_path)
    n__global_path_pub_v_rrt-->|ì „ì—­ê²½ë¡œ Publish|t__global_path(/global_path)
    
    
    
    
    t__dijkstra_path(/dijkstra_path)-->n__global_path_pub_v_rrt
		
		style n__global_path_pub_v_rrt stroke:red ,color: black, fill: white, stroke-width : 5px
	
		
    
    style n__mgeo_dijkstra_path_parking stroke:red ,color: black, fill: white, stroke-width : 5px
    style t__global_change_cmd stroke:black ,color: black, fill: white, stroke-width : 3px
    style t__dijkstra_path stroke:black ,color: black, fill: white, stroke-width : 3px
    style t__global_path stroke:black ,color: black, fill: white, stroke-width : 3px
    style t__odom stroke:black ,color: black, fill: white, stroke-width : 3px
 
    
 
    t__global_change_cmd(/global_change_cmd)-->|ëª¨ë“œ 2|t__cmd_2(ì£¼ì°¨ì¥ ì§„ì… í›„ ë‚´ë¶€ ê²½ë¡œ)
   

		
		
	
    
    
    t__global_change_cmd(/global_change_cmd)-->|ëª¨ë“œ 3|t__cmd_3(ì£¼ì°¨ ì§€ì  ë„ì°© í›„ ì „/í›„ì§„ ì£¼ì°¨ ê²½ë¡œ)

```

<br>

<br>

#### 4-2) ì£¼ì°¨ì¥ ë‚´ë¶€ ê²½ë¡œ ìƒì„± (ì£¼ì°¨ì¥ ì…êµ¬ â†’ ì£¼ì°¨ ì§€ì )

```mermaid
graph TB;
		n__map_change_controller(map_change_controller.py)
		n__map_change_controller --> |ê²½ë¡œ ëª¨ë“œ|t__global_change_cmd(/global_change_cmd)
		style n__map_change_controller stroke:red ,color: black, fill: white, stroke-width : 5px
		t__global_change_cmd(/global_change_cmd)-->|ëª¨ë“œ 1|t__cmd_1(ì£¼ì°¨ì¥ê¹Œì§€ Dijkstra ê²½ë¡œ)
		t__global_change_cmd(/global_change_cmd)-->|ëª¨ë“œ 2|t__cmd_2(ì£¼ì°¨ì¥ ì§„ì… í›„ ë‚´ë¶€ ê²½ë¡œ)
		t__cmd_2 --> |ì „ì—­ê²½ë¡œë¥¼ ì£¼ì°¨ì¥ ë‚´ë¶€ê²½ë¡œë¡œ ë³€ê²½| n__global_path_pub_v_rrt
		t__cmd_3(ì£¼ì°¨ ì§€ì  ë„ì°© í›„ ì „/í›„ì§„ ì£¼ì°¨ ê²½ë¡œ)
		t__global_change_cmd --> |ëª¨ë“œ 3| t__cmd_3(ì£¼ì°¨ ì§€ì  ë„ì°© í›„ ì „/í›„ì§„ ì£¼ì°¨ ê²½ë¡œ)

    n__global_path_pub_v_rrt-->|ì „ì—­ê²½ë¡œ Publish|t__global_path(/global_path)
    

		style n__global_path_pub_v_rrt stroke:red ,color: black, fill: white, stroke-width : 5px
		style t__global_change_cmd stroke:black ,color: black, fill: white, stroke-width : 3px
		style t__global_path stroke:black ,color: black, fill: white, stroke-width : 3px
```

<br>

<br>

#### 4-3) ì£¼í–‰ ì œì–´ê¸° (ì œì–´ ë¡œì§)

```mermaid
graph TB;

		n__SensorData(ì „ì²˜ë¦¬í•œ Dataset)
		n__SensorData --> t__odom(/odom)
		n__SensorData --> t__cluster(/cluster)
		
		n__local_path_pub(local_path_pub.py)
    
    t__global_path(/global_path) --> n__local_path_pub
    t__odom(/odom) --> n__local_path_pub
    
    n__local_path_pub --> |ì „ì—­ê²½ë¡œ ê¸°ë°˜ìœ¼ë¡œ í˜„ì¬ìœ„ì¹˜ì—ì„œ ì§€ì—­ ê²½ë¡œ ìƒì„±|t__local_path(/local_path)

    
    n__lattice_planner(lattice_planner.py)
    
    t__cluster(/cluster) --> |Lidar ì„¼ì„œ ë°ì´í„°|n__lattice_planner
    t__Object_topic(Object_topic)-->|ì¥ì• ë¬¼ ì •ë³´|n__lattice_planner
    t__local_path(/local_path)-->|ìƒì„±ëœ ì§€ì—­ ê²½ë¡œ|n__lattice_planner
    
    n__lattice_planner-->|ì§€ì—­ê²½ë¡œ ê¸°ë°˜ìœ¼ë¡œ ì¥ì• ë¬¼ íšŒí”¼ê²½ë¡œ ìƒì„±|t__lattice_path(/lattice_path)
    
    
    
    n__advanced_purepursuit_v_rrt_fw(advanced_purepersuit_v_rrt_fw.py)
    
    t__lattice_path(/lattice_path) --> |ì¥ì• ë¬¼ íšŒí”¼ ê²½ë¡œ|n__advanced_purepursuit_v_rrt_fw
    t__global_path(/global_path) --> |ì „ì—­ ê²½ë¡œ|n__advanced_purepursuit_v_rrt_fw
    t__odom(/odom) --> |GPS/IMU ì„¼ì„œ ë°ì´í„°|n__advanced_purepursuit_v_rrt_fw
    
    n__advanced_purepursuit_v_rrt_fw --> n__PID(PID ì œì–´ê¸°) 
    n__advanced_purepursuit_v_rrt_fw --> n__pure_pursuit(Pure Pursuit ì¡°í–¥ ì•Œê³ ë¦¬ì¦˜)
    n__PID(PID ì œì–´ê¸°) --> t__ctrl_cmd(/ctrl_cmd)
    n__pure_pursuit(Pure Pursuit ì¡°í–¥ ì•Œê³ ë¦¬ì¦˜) --> t__ctrl_cmd(/ctrl_cmd)
    t__ctrl_cmd(/ctrl_cmd) --> |Accel/Brake/Steering/Gear ì œì–´|n__MORAI_ì‹œë®¬ë ˆì´í„°(Simulation ì°¨ëŸ‰ ì œì–´)
    
    style t__ctrl_cmd stroke:black ,color: black, fill: white, stroke-width : 3px
    style n__advanced_purepursuit_v_rrt_fw stroke:red ,color: black, fill: white, stroke-width : 5px
		style n__MORAI_ì‹œë®¬ë ˆì´í„° stroke:black ,color: black, fill: white, stroke-width : 5px
		style n__local_path_pub stroke:red ,color: black, fill: white, stroke-width : 5px
    style n__SensorData stroke:black ,color: black, fill: white, stroke-width : 5px
    style n__lattice_planner stroke:red ,color: black, fill: white, stroke-width : 5px
    style t__cluster stroke:black ,color: black, fill: white, stroke-width : 3px
    style t__odom stroke:black ,color: black, fill: white, stroke-width : 3px
    style t__global_path stroke:black ,color: black, fill: white, stroke-width : 3px
    style t__local_path stroke:black ,color: black, fill: white, stroke-width : 3px
    style t__lattice_path stroke:black ,color: black, fill: white, stroke-width : 3px
```

---


<br>



## 5. ì£¼ì°¨ ì•„í‚¤í…ì³





##### ğŸ’¡ ì£¼ì°¨ ìë¦¬ë¥¼ ì°¾ì€ í›„ ì£¼ì°¨ ëª¨ë“œë¡œ ë³€ê²½ë¨


<br>

#### 5-1) RRT * ì•Œê³ ë¦¬ì¦˜ì„ í†µí•œ ì£¼ì°¨ ê²½ë¡œ ìƒì„±

```mermaid
graph TB;
		n__map_change_controller(map_change_controller.py)
		n__map_change_controller --> |ê²½ë¡œ ëª¨ë“œ|t__global_change_cmd(/global_change_cmd)
		style n__map_change_controller stroke:red ,color: black, fill: white, stroke-width : 5px
		t__global_change_cmd(/global_change_cmd)-->|ëª¨ë“œ 1|t__cmd_1(ì£¼ì°¨ì¥ê¹Œì§€ Dijkstra ê²½ë¡œ)
		t__global_change_cmd(/global_change_cmd)-->|ëª¨ë“œ 2|t__cmd_2(ì£¼ì°¨ì¥ ì§„ì… í›„ ë‚´ë¶€ ê²½ë¡œ)
		t__cmd_3(ì£¼ì°¨ ì§€ì  ë„ì°© í›„ ì „/í›„ì§„ ì£¼ì°¨ ê²½ë¡œ)
		t__global_change_cmd --> |ëª¨ë“œ 3| t__cmd_3(ì£¼ì°¨ ì§€ì  ë„ì°© í›„ ì „/í›„ì§„ ì£¼ì°¨ ê²½ë¡œ)
		
		t__cmd_3(ì£¼ì°¨ ì§€ì  ë„ì°© í›„ ì „/í›„ì§„ ì£¼ì°¨ ê²½ë¡œ) --> t__start_rrt(/start_rrt)
		t__start_rrt(/start_rrt) -->  |RRT * ê²½ë¡œ íƒìƒ‰ ì‹ í˜¸|n__assignment_star
		n__SensorData(ì „ì²˜ë¦¬í•œ Dataset)-->t__odom
		n__SensorData(ì „ì²˜ë¦¬í•œ Dataset)-->t__Object_topic
		t__odom(/odom) --> |í˜„ì¬ ìœ„ì¹˜ ë°ì´í„°| n__assignment_star
		t__Object_topic(Object_topic)-->|ì¥ì• ë¬¼ ì •ë³´| n__assignment_star
		n__global_path_pub_v_rrt(global_path_pub.py)
    n__assignment_star(assignment_star.py) --> |RRT * ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ìƒì„±í•œ ì£¼ì°¨ê²½ë¡œ|n__global_path_pub_v_rrt
    n__global_path_pub_v_rrt-->|ì „ì—­ê²½ë¡œ Publish|t__global_path(/global_path)
    
		style n__assignment_star stroke:red, color:black, fill:white, stroke-width:5px
		style n__global_path_pub_v_rrt stroke:red ,color: black, fill: white, stroke-width : 5px
		style t__global_change_cmd stroke:black ,color: black, fill: white, stroke-width : 3px
		style n__SensorData stroke:black ,color: black, fill: white, stroke-width : 3px
		style t__odom stroke:black ,color: black, fill: white, stroke-width : 3px
		style t__Object_topic stroke:black ,color: black, fill: white, stroke-width : 3px
		style t__start_rrt stroke:black ,color: black, fill: white, stroke-width : 3px
		style t__global_path stroke:black ,color: black, fill: white, stroke-width : 3px
```


<br>

#### 5-2) RRT * ê²½ë¡œ ì „ì§„/í›„ì§„ ì£¼ì°¨ ì œì–´ ë¡œì§

<br>

##### ğŸ’¡ ì „ì§„/í›„ì§„ ì‹œ ì œì–´ê¸° ë³„ë„ë¡œ ê´€ë¦¬í•¨ (ì•„ë˜ ë¡œì§ì€ ì „ì§„ì˜ ê²½ìš°)

<br>

```mermaid
graph TB;

		n__SensorData(ì „ì²˜ë¦¬í•œ Dataset)
		n__SensorData --> t__odom(/odom)

		
		n__local_path_pub(local_path_pub.py)
    
    t__global_path(/global_path) --> n__local_path_pub
    
    n__local_path_pub --> |ì „ì—­ê²½ë¡œ ê¸°ë°˜ìœ¼ë¡œ í˜„ì¬ìœ„ì¹˜ì—ì„œ ì§€ì—­ ê²½ë¡œ ìƒì„±|t__local_path(/local_path)

    
		

    
    n__advanced_purepursuit_forward(advanced_purepursuit_forward.py)
    
    t__global_path(/global_path) --> |ì „ì—­ ê²½ë¡œ|n__advanced_purepursuit_forward
    t__local_path(/local_path) --> |ì „ì—­ ê²½ë¡œ|n__advanced_purepursuit_forward
    t__odom(/odom) --> |GPS/IMU ì„¼ì„œ ë°ì´í„°|n__advanced_purepursuit_forward
    
    n__advanced_purepursuit_forward --> n__PID(PID ì œì–´ê¸°) 
    n__advanced_purepursuit_forward --> n__pure_pursuit(Pure Pursuit ì¡°í–¥ ì•Œê³ ë¦¬ì¦˜)
    n__advanced_purepursuit_forward --> t__mode_cmd(/mode_cmd)
    t__mode_cmd(/mode_cmd) --> n__srv_event_cmd(srv_event_cmd)
    
    
    
    
    n__PID(PID ì œì–´ê¸°) --> t__ctrl_cmd(/ctrl_cmd)
    n__pure_pursuit(Pure Pursuit ì¡°í–¥ ì•Œê³ ë¦¬ì¦˜) --> t__ctrl_cmd(/ctrl_cmd)
    t__ctrl_cmd(/ctrl_cmd) --> |Accel/Brake/Steering ì œì–´|n__MORAI_ì‹œë®¬ë ˆì´í„°(Simulation ì°¨ëŸ‰ ì œì–´)
    n__srv_event_cmd-->|Gear ì œì–´|n__MORAI_ì‹œë®¬ë ˆì´í„°(Simulation ì°¨ëŸ‰ ì œì–´)
    style t__ctrl_cmd stroke:black ,color: black, fill: white, stroke-width : 3px
    style n__advanced_purepursuit_forward stroke:red ,color: black, fill: white, stroke-width : 5px
		style n__MORAI_ì‹œë®¬ë ˆì´í„° stroke:black ,color: black, fill: white, stroke-width : 5px
		style n__local_path_pub stroke:red ,color: black, fill: white, stroke-width : 5px
		style n__srv_event_cmd stroke:red ,color: black, fill: white, stroke-width : 5px
    style n__SensorData stroke:black ,color: black, fill: white, stroke-width : 5px
  
    style t__odom stroke:black ,color: black, fill: white, stroke-width : 3px
    style t__global_path stroke:black ,color: black, fill: white, stroke-width : 3px
    style t__local_path stroke:black ,color: black, fill: white, stroke-width : 3px
    style t__mode_cmd stroke:black ,color: black, fill: white, stroke-width : 3px
 
 
```

<br>

#### 5-3) ê¶¤ë„ ìƒì„± ì•Œê³ ë¦¬ì¦˜ì„ í†µí•œ ì£¼ì°¨ ì œì–´ ë¡œì§

```mermaid
graph TB;
		n__map_change_controller(map_change_controller.py)
		n__map_change_controller --> |ê²½ë¡œ ëª¨ë“œ|t__global_change_cmd(/global_change_cmd)
		style n__map_change_controller stroke:red ,color: black, fill: white, stroke-width : 5px
		t__global_change_cmd(/global_change_cmd)-->|ëª¨ë“œ 1|t__cmd_1(ì£¼ì°¨ì¥ê¹Œì§€ Dijkstra ê²½ë¡œ)
		t__global_change_cmd(/global_change_cmd)-->|ëª¨ë“œ 2|t__cmd_2(ì£¼ì°¨ì¥ ì§„ì… í›„ ë‚´ë¶€ ê²½ë¡œ)
		t__cmd_3(ì£¼ì°¨ ì§€ì  ë„ì°© í›„ ì „/í›„ì§„ ì£¼ì°¨ ê²½ë¡œ)
		t__global_change_cmd --> |ëª¨ë“œ 3| t__cmd_3(ì£¼ì°¨ ì§€ì  ë„ì°© í›„ ì „/í›„ì§„ ì£¼ì°¨ ê²½ë¡œ)
		
		t__cmd_3(ì£¼ì°¨ ì§€ì  ë„ì°© í›„ ì „/í›„ì§„ ì£¼ì°¨ ê²½ë¡œ) --> t__start_orbit(/start_orbit)
		t__start_orbit(/start_orbit) -->  |ê¶¤ë„ ìƒì„± ì‹ í˜¸|n__auto_parking(auto_parking.py) 
		n__SensorData(ì „ì²˜ë¦¬í•œ Dataset)-->t__odom
		n__SensorData(ì „ì²˜ë¦¬í•œ Dataset)-->t__Object_topic
		t__odom(/odom) --> |í˜„ì¬ ìœ„ì¹˜ ë°ì´í„°| n__auto_parking
		t__Object_topic(Object_topic)-->|ì¥ì• ë¬¼ ì •ë³´| n__auto_parking
		
    n__auto_parking --> t__mode_cmd(/mode_cmd)
    t__mode_cmd(/mode_cmd) --> n__srv_event_cmd(srv_event_cmd)
    n__auto_parking --> t__ctrl_cmd(/ctrl_cmd)
    t__ctrl_cmd(/ctrl_cmd) --> |Accel/Brake/Steering ì œì–´|n__MORAI_ì‹œë®¬ë ˆì´í„°(Simulation ì°¨ëŸ‰ ì œì–´)
    n__srv_event_cmd-->|Gear ì œì–´|n__MORAI_ì‹œë®¬ë ˆì´í„°(Simulation ì°¨ëŸ‰ ì œì–´)
    n__MORAI_ì‹œë®¬ë ˆì´í„°(Simulation ì°¨ëŸ‰ ì œì–´)--> |ì£¼ì°¨ì™„ë£Œê¹Œì§€ ë°˜ë³µí•˜ì—¬ ì‹¤ì‹œê°„ ì œì–´|n__auto_parking
		style n__auto_parking stroke:red, color:black, fill:white, stroke-width:5px
		style n__srv_event_cmd stroke:red ,color: black, fill: white, stroke-width : 5px
		style t__global_change_cmd stroke:black ,color: black, fill: white, stroke-width : 3px
		style n__SensorData stroke:black ,color: black, fill: white, stroke-width : 3px
		style t__odom stroke:black ,color: black, fill: white, stroke-width : 3px
		style t__Object_topic stroke:black ,color: black, fill: white, stroke-width : 3px
		style t__start_orbit stroke:black ,color: black, fill: white, stroke-width : 3px
		style t__mode_cmd stroke:black ,color: black, fill: white, stroke-width : 3px
		style t__ctrl_cmd stroke:black ,color: black, fill: white, stroke-width : 3px
```




<br>

